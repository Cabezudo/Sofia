<!DOCTYPE html>
<html profiles="administrator, assistant">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Página principal</title>
    <link rel="stylesheet" type="text/css" href="/css/manager/sites/add.css">
    <script src="/js/manager/sites/add.js"></script>
    <script lib="core/0.1.0"></script>
    <script lib="inputGenericValidator/0.1.0"></script>
    <script lib="linkTo/0.1.0"></script>
    <script>
      {
        const createGUI = () => {
          const detailDiv = Core.validateById('detail');
          const siteName = Core.validateById('siteName');
          const siteHost = Core.validateById('siteHost');

          inputGenericValidator({
            element: siteName,
            getValidationURL: () => {
              return `/api/v1/sites/names/${siteName.value}/validate`;
            }
          });

          inputGenericValidator({
            element: siteHost,
            getValidationURL: () => {
              return `/api/v1/hosts/names/${siteHost.value}/validate`;
            }
          });

          Core.screenBlocker.unblock();
        };
        Core.addOnloadFunction(createGUI);
      }
    </script>
    <style file="menu.css"></style>
  </head>
  <body>
    <section file="../header.html"></section>
    <section file="addMenu.html"></section>
    <section id="messages" template="messages/section/simple/message"></section>
    <section id="detail" class="blue">
      <div class="container">
        <h2 class="title">Agregar sitio</h2>
        <hr>
        <div class="column">
          <div class="content">
            <p>Complete los campos a continuación para agregar un nuevo sitio al servidor. El nombre del sitio es arbitrario, puede elegir el que sea. El nombre de host tiene que ser un host que pueda resolverse a una IP.</p>
          </div>
        </div>
        <div class="column">
          <div class="content">
            <div class="field"><div class="control"><input id="siteName" placeholder="Nombre"/></div></div>
            <div class="field"><div class="control"><input id="siteVersion" value="1" disabled/></div></div>
            <div class="field"><div class="control"><input id="siteHost" placeholder="Host" /></div></div>
            <div class="field"><div class="control centered">
                <button type="button" name="add" class="button blue"disabled >Agregar</button></div>
            </div>
          </div>
        </div>
      </div>
    </section>
    <footer>
      <div class="control centered">
        &copy; 2013 - 2020 Esteban Cabezudo&nbsp;|&nbsp;<a href="">Licencia</a>
      </div>
    </footer>
  </body>
</html>